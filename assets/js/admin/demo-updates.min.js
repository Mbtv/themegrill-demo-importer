!function(a,b,c){var d=a(document);b=b||{},b.updates=b.updates||{},b.updates.l10n=_.extend(b.updates.l10n,c.l10n||{}),b.updates.addAdminNotice=function(c){var e,f=a(c.selector),g=a(".wp-header-end");delete c.selector,e=b.updates.adminNotice(c),f.length||(f=a("#"+c.id)),f.length?f.replaceWith(e):g.length?a(".wp-header-end").after(e):a(".wrap").find("> h1").after(e),d.trigger("wp-updates-notice-added")},b.updates.importDemo=function(c){var e=a('.demo-import[data-slug="'+c.slug+'"]');return c=_.extend({success:b.updates.importDemoSuccess,error:b.updates.importDemoError},c),e.addClass("updating-message"),e.parents(".theme").addClass("focus"),e.html()!==b.updates.l10n.importing&&e.data("originaltext",e.html()),e.text(b.updates.l10n.importing).attr("aria-label",b.updates.l10n.demoImportingLabel.replace("%s",e.data("name"))),b.a11y.speak(b.updates.l10n.importingMsg,"polite"),a('.theme-info .theme-description, [data-slug="'+c.slug+'"]').removeClass("demo-import-failed").find(".notice.notice-error").remove(),d.trigger("wp-demo-importing",c),b.updates.ajax("import-demo",c)},b.updates.importDemoSuccess=function(c){var e,f=a(".theme-overlay, [data-slug="+c.slug+"]");d.trigger("wp-demo-import-success",c),e=f.find(".button-primary").removeClass("updating-message").addClass("updated-message disabled").attr("aria-label",b.updates.l10n.demoImportedLabel.replace("%s",c.demoName)).text(b.updates.l10n.imported),b.a11y.speak(b.updates.l10n.importedMsg,"polite"),setTimeout(function(){c.previewUrl&&(e.siblings(".demo-preview").remove(),e.attr("target","_blank").attr("href",c.previewUrl).removeClass("demo-import updated-message disabled").addClass("live-preview").attr("aria-label",b.updates.l10n.livePreviewLabel.replace("%s",c.demoName)).text(b.updates.l10n.livePreview))},1e3)},b.updates.importDemoError=function(c){var e,f,g=b.updates.l10n.importFailed.replace("%s",c.errorMessage),h=b.updates.adminNotice({className:"update-message notice-error notice-alt",message:g});b.updates.isValidResponse(c,"import")&&(d.find("body").hasClass("modal-open")||d.find(".themes").hasClass("single-theme")?(f=a('.demo-import[data-slug="'+c.slug+'"]'),e=a(".theme-info .theme-description").prepend(h)):(e=a('[data-slug="'+c.slug+'"]').removeClass("focus").addClass("demo-import-failed").append(h),f=e.find(".demo-import")),f.removeClass("updating-message").attr("aria-label",b.updates.l10n.demoImportFailedLabel.replace("%s",f.data("name"))).text(b.updates.l10n.importFailedShort),b.a11y.speak(g,"assertive"),d.trigger("wp-demo-import-error",c))},b.updates.deleteDemo=function(c){var e=a(".theme-actions .delete-demo");return c=_.extend({success:b.updates.deleteDemoSuccess,error:b.updates.deleteDemoError},c),e&&e.html()!==b.updates.l10n.deleting&&e.data("originaltext",e.html()).text(b.updates.l10n.deleting),b.a11y.speak(b.updates.l10n.deleting,"polite"),a(".theme-info .update-message").remove(),d.trigger("wp-demo-deleting",c),b.updates.ajax("delete-demo",c)},b.updates.deleteDemoSuccess=function(a){b.a11y.speak(b.updates.l10n.deleted,"polite"),d.trigger("wp-demo-delete-success",a)},b.updates.deleteDemoError=function(c){var e=a(".theme-actions .delete-demo"),f=b.updates.l10n.deleteFailed.replace("%s",c.errorMessage),g=b.updates.adminNotice({className:"update-message notice-error notice-alt",message:f});b.updates.maybeHandleCredentialError(c,"delete-demo")||(a(".theme-info .theme-description").before(g),e.html(e.data("originaltext")),b.a11y.speak(f,"assertive"),d.trigger("wp-demo-delete-error",c))},b.updates.bulkInstallPlugin=function(c){var e=a('tr[data-slug="'+c.slug+'"]'),f=e.find(".plugin-status span");return c=_.extend({success:b.updates.bulkInstallPluginSuccess,error:b.updates.bulkInstallPluginError},c),f.html()!==b.updates.l10n.installing&&f.data("originaltext",f.html()),f.addClass("updating-message").attr("aria-label",b.updates.l10n.pluginInstallingLabel.replace("%s",e.data("name"))).text(b.updates.l10n.installing),b.a11y.speak(b.updates.l10n.installingMsg,"polite"),d.trigger("wp-plugin-installing",c),b.updates.ajax("install-plugin",c)},b.updates.bulkInstallPluginSuccess=function(c){var e=a('tr[data-slug="'+c.slug+'"]').removeClass("install").addClass("installed"),f=e.find(".plugin-status span");f.removeClass("updating-message install-now").addClass("updated-message activate").attr("aria-label",b.updates.l10n.pluginInstalledLabel.replace("%s",c.pluginName)).text(b.updates.l10n.pluginInstalled),b.a11y.speak(b.updates.l10n.installedMsg,"polite"),d.trigger("wp-plugin-install-success",c)},b.updates.bulkInstallPluginError=function(c){var e,f=a('tr[data-slug="'+c.slug+'"]'),g=f.find(".plugin-status span");b.updates.isValidResponse(c,"install")&&(b.updates.maybeHandleCredentialError(c,"install-plugin")||(e=b.updates.l10n.installFailed.replace("%s",c.errorMessage),g.removeClass("updating-message").addClass("updated-message").attr("aria-label",b.updates.l10n.pluginInstallFailedLabel.replace("%s",f.data("name"))).text(b.updates.l10n.installFailedShort),b.a11y.speak(e,"assertive"),d.trigger("wp-plugin-install-error",c)))},b.updates.isValidResponse=function(c,d){var e,f=b.updates.l10n.unknownError;if(_.isObject(c)&&!_.isFunction(c.always))return!0;switch(_.isString(c)&&"-1"===c?f=b.updates.l10n.nonceError:_.isString(c)?f=c:"undefined"!=typeof c.readyState&&0===c.readyState?f=b.updates.l10n.connectionError:_.isString(c.statusText)&&(f=c.statusText+" "+b.updates.l10n.statusTextLink),d){case"import":e=b.updates.l10n.importFailed}return e=e.replace("%s",f),b.updates.addAdminNotice({id:"unknown_error",className:"notice-error is-dismissible",message:_.unescape(e)}),a(".button.updating-message").removeClass("updating-message").removeAttr("aria-label").text(b.updates.l10n.updateFailedShort),b.a11y.speak(e,"assertive"),!1},b.updates.queueChecker=function(){var a;if(!b.updates.ajaxLocked&&b.updates.queue.length){switch(a=b.updates.queue.shift(),a.action){case"import-demo":b.updates.importDemo(a.data);break;case"delete-demo":b.updates.deleteDemo(a.data);break;case"install-plugin":b.updates.bulkInstallPlugin(a.data)}d.trigger("wp-updates-queue-job",a)}},a(function(){d.on("click","a.plugins-install",function(c){var e=d.find('.wp-locked input[name="checked[]"], input[name="checked[]"]:checked'),f=0,g=0,h=[];a(".theme-info .update-message").remove(),e.length||(c.preventDefault(),a(".theme-about").animate({scrollTop:0}),a(".theme-info .plugins-info").after(b.updates.adminNotice({id:"no-items-selected",className:"update-message notice-error notice-alt",message:b.updates.l10n.noItemsSelected}))),b.updates.maybeRequestFilesystemCredentials(c),c.preventDefault(),d.find('.manage-column [type="checkbox"]').prop("checked",!1),d.trigger("wp-plugin-bulk-install",e),e.each(function(c,d){var e=a(d),f=e.parents("tr");return!f.hasClass("install")||f.find("notice-error").length?void e.prop("checked",!1):void b.updates.queue.push({action:"install-plugin",data:{slug:f.data("slug")}})}),d.on("wp-plugin-install-success wp-plugin-install-error",function(c,d){var e,i,j=a('[data-slug="'+d.slug+'"]');"wp-"+d.install+"-install-success"===c.type?f++:(i=d.pluginName?d.pluginName:j.find(".plugin-name").text(),g++,h.push(i+": "+d.errorMessage)),j.find('input[name="checked[]"]:checked').prop("checked",!1),b.updates.adminNotice=b.template("wp-bulk-installs-admin-notice"),a(".theme-info .bulk-action-notice").remove(),a(".theme-info .plugins-info").after(b.updates.adminNotice({id:"bulk-action-notice",className:"bulk-action-notice notice-alt",successes:f,errors:g,errorMessages:h,type:d.install})),e=a("#bulk-action-notice").on("click","button",function(){a(this).toggleClass("bulk-action-errors-collapsed").attr("aria-expanded",!a(this).hasClass("bulk-action-errors-collapsed")),e.find(".bulk-action-errors").toggleClass("hidden")}),g>0&&!b.updates.queue.length&&a(".theme-about").animate({scrollTop:0})}),d.on("wp-updates-notice-added",function(){b.updates.adminNotice=b.template("wp-updates-admin-notice")}),b.updates.queueChecker()})})}(jQuery,window.wp,window._demoUpdatesSettings);